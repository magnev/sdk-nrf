sample:
    description: HMAC key derivation function example
    name: HKDF example
tests:
    sample.hkdf:
        tags: introduction
        platform_allow: nrf5340dk_nrf5340_cpuappns nrf5340dk_nrf5340_cpuapp nrf9160dk_nrf9160ns nrf9160dk_nrf9160 nrf52840dk_nrf52840
        harness: console
        harness_config:
          type: multi_line
          regex:
            - ".*Example finished successfully!.*"

    sample.hkdf_cc3xx:
        tags: introduction
        platform_allow:  nrf5340dk_nrf5340_cpuapp nrf9160dk_nrf9160 nrf52840dk_nrf52840
        harness: console
        harness_config:
          type: multi_line
          regex:
            - ".*Example finished successfully!.*"
        extra_configs:
            - CONFIG_NORDIC_SECURITY_BACKEND=y
            - CONFIG_CC3XX_BACKEND=y
            - CONFIG_MBEDTLS_VANILLA_BACKEND=n
            - CONFIG_OBERON_BACKEND=n

    sample.hkdf_oberon:
        tags: introduction
        platform_allow:  nrf5340dk_nrf5340_cpuapp nrf9160dk_nrf9160 nrf52840dk_nrf52840
        harness: console
        harness_config:
          type: multi_line
          regex:
            - ".*Example finished successfully!.*"
        extra_configs:
            - CONFIG_NORDIC_SECURITY_BACKEND=y
            - CONFIG_CC3XX_BACKEND=n
            - CONFIG_MBEDTLS_VANILLA_BACKEND=n
            - CONFIG_OBERON_BACKEND=y

    sample.hkdf_multi:
        tags: introduction
        platform_allow:  nrf5340dk_nrf5340_cpuapp nrf9160dk_nrf9160 nrf52840dk_nrf52840
        harness: console
        harness_config:
          type: multi_line
          regex:
            - ".*Example finished successfully!.*"
        extra_configs:
            - CONFIG_NORDIC_SECURITY_BACKEND=y
            - CONFIG_CC3XX_BACKEND=y
            - CONFIG_MBEDTLS_VANILLA_BACKEND=y
            - CONFIG_OBERON_BACKEND=y

    sample.hkdf_cc3xx_oberon:
        tags: introduction
        platform_allow:  nrf5340dk_nrf5340_cpuapp nrf9160dk_nrf9160 nrf52840dk_nrf52840
        harness: console
        harness_config:
          type: multi_line
          regex:
            - ".*Example finished successfully!.*"
        extra_configs:
            - CONFIG_NORDIC_SECURITY_BACKEND=y
            - CONFIG_CC3XX_BACKEND=y
            - CONFIG_MBEDTLS_VANILLA_BACKEND=n
            - CONFIG_OBERON_BACKEND=y

    sample.hkdf_vanilla:
        tags: introduction
        platform_allow:  nrf5340dk_nrf5340_cpuapp nrf9160dk_nrf9160 nrf52840dk_nrf52840
        harness: console
        harness_config:
          type: multi_line
          regex:
            - ".*Example finished successfully!.*"
        extra_configs:
            - CONFIG_NORDIC_SECURITY_BACKEND=y
            - CONFIG_CC3XX_BACKEND=n
            - CONFIG_MBEDTLS_VANILLA_BACKEND=y
            - CONFIG_OBERON_BACKEND=n

